language: cpp
sudo: false
os:
  - linux
  - osx
addons:
  apt:
    packages:
      - pandoc
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install pandoc; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install imagemagick; fi
compiler:
  - gcc
  - clang
env:
  - CFLAGS=-O2 CXXFLAGS=-O2
  - CFLAGS="-O2 -pedantic -Wall -Wextra -Werror" CXXFLAGS="-O2 -pedantic -Wall -Wextra -Werror"
  - CFLAGS=-O3 CXXFLAGS=-O3
script: support/test-build.sh
